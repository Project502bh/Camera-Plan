<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <title>Stadium Camera Planner Pro (13 Icons)</title>
    <style>
        /* --- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #eef2f3; padding: 20px; margin: 0; color: #333; }
        h1 { text-align: center; margin-bottom: 20px; color: #2c3e50; font-size: 24px; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .controls { display: flex; justify-content: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; }
        button { 
            padding: 10px 20px; cursor: pointer; background: white; border: 1px solid #ccc; 
            border-radius: 6px; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        #addBtn { background: #27ae60; color: white; border: none; }
        #printBtn { background: #2980b9; color: white; border: none; }
        #clearBtn { background: #c0392b; color: white; border: none; }
        
        .workspace { display: flex; flex-direction: column; align-items: center; gap: 20px; }

        /* --- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ù„Ø¹Ø¨ --- */
        #pitch-container {
            position: relative;
            width: 1000px;
            max-width: 95vw;
            aspect-ratio: 16/9;
            background-image: url('pitch.jpg'); /* Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ù„Ù…Ù„Ø¹Ø¨ */
            background-size: cover;
            background-position: center;
            border: 4px solid #fff;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            overflow: hidden; 
            background-color: #4CAF50;
        }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª --- */
        .cam-icon {
            position: absolute;
            width: 60px;  /* Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            height: 60px;
            background-size: cover; 
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            cursor: grab;
            transform: translate(-50%, -50%);
            z-index: 10;
            background-color: white; 
            transition: transform 0.1s, border-color 0.2s;
        }

        .cam-icon:hover { z-index: 110; transform: translate(-50%, -50%) scale(1.05); }
        .cam-icon.selected { border-color: #e74c3c; box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.4); z-index: 100; }
        .cam-icon:active { cursor: grabbing; transform: translate(-50%, -50%) scale(1.1); }

        /* Ø±Ù‚Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ø­Ù…Ø± Ø§Ù„ØµØºÙŠØ± */
        .cam-num {
            position: absolute; top: -5px; right: -5px;
            background: #e74c3c; color: white; font-size: 12px;
            width: 22px; height: 22px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid white; font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* --- Ø§Ù„Ø¬Ø¯ÙˆÙ„ --- */
        .table-box { width: 1000px; max-width: 95vw; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 750px; }
        th, td { border-bottom: 1px solid #eee; padding: 12px; text-align: left; vertical-align: middle; }
        th { background: #f8f9fa; color: #7f8c8d; font-weight: 700; text-transform: uppercase; font-size: 12px; letter-spacing: 0.5px; }
        tr:hover { background: #f1f8e9; }
        tr.active-row { background: #e3f2fd; }
        
        input, select { 
            width: 100%; padding: 8px 12px; box-sizing: border-box; 
            border: 1px solid #ddd; border-radius: 6px; background: #fafafa; font-size: 13px;
        }
        input:focus, select:focus { border-color: #3498db; background: white; outline: none; box-shadow: 0 0 0 2px rgba(52,152,219,0.2); }

        /* Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        .del-btn { background: transparent; border: none; color: #e74c3c; font-size: 16px; cursor: pointer; padding: 5px; border-radius: 4px; }
        .del-btn:hover { background: #ffebee; }

        /* Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
        @media print {
            .controls, .table-box { display: none; }
            #pitch-container { border: none; box-shadow: none; width: 100%; height: 100vh; transform: rotate(90deg); transform-origin: center; page-break-after: always; }
            body { background: white; margin: 0; padding: 0; }
        }
    </style>
</head>
<body>

    <h1>ğŸ¥ Stadium Camera Planner</h1>

    <div class="controls">
        <button id="addBtn" onclick="addCam()">â• Add Camera</button>
        <button onclick="saveData()">ğŸ’¾ Save Plan</button>
        <button id="printBtn" onclick="window.print()">ğŸ–¨ï¸ Print Layout</button>
        <button id="clearBtn" onclick="clearAll()">ğŸ—‘ï¸ Reset All</button>
    </div>

    <div class="workspace">
        <div id="pitch-container">
            </div>

        <div class="table-box">
            <table>
                <thead>
                    <tr>
                        <th width="5%">#</th>
                        <th width="20%">Icon Type</th>
                        <th width="20%">Camera Name</th>
                        <th width="10%">Lens</th>
                        <th width="35%">Location / Notes</th>
                        <th width="10%">Action</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        const pitch = document.getElementById('pitch-container');
        const tbody = document.getElementById('tableBody');
        let cameras = [];
        let selectedId = null;
        let draggedId = null;

        // --- ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„ØµÙˆØ± (ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø·Ø§Ø¨Ù‚Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª) ---
        const CAM_TYPES = [
            { id: 'cam_main',    name: 'Main Camera',       lens: '86x',  img: '2.jpg' },
            { id: 'cam_tight',   name: 'Tight / Zoom',      lens: '100x', img: '11.jpg' }, // ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«
            { id: 'cam_hbg',     name: 'High Behind Goal',  lens: '86x',  img: '12.jpg' }, // ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«
            { id: 'cam_lbg',     name: 'Low Behind Goal',   lens: 'Wide', img: '1.jpg' },
            
            { id: 'cam_rev',     name: 'Reverse Angle',     lens: '86x',  img: '7.jpg' },
            { id: 'cam_18yd',    name: '18-Yard Box',       lens: '22x',  img: '8.jpg' },
            { id: 'cam_close',   name: 'Close Up / Face',   lens: 'Long', img: '9.jpg' },  // ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«
            { id: 'cam_rf',      name: 'Wireless RF',       lens: 'Std',  img: '10.jpg' }, // ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«

            { id: 'cam_steady',  name: 'Steadicam',         lens: 'Wide', img: '6.jpg' },
            { id: 'cam_hh',      name: 'Handheld',          lens: 'Std',  img: '5.jpg' },
            { id: 'cam_beauty',  name: 'Beauty Shot',       lens: 'Wide', img: '4.jpg' },
            { id: 'cam_drone',   name: 'Drone',             lens: 'Wide', img: '3.jpg' },
            { id: 'cam_extra',   name: 'Extra / VIP',       lens: 'Std',  img: '13.jpg' }  // ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«
        ];

        // --- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
        function loadData() {
            const data = localStorage.getItem('camPlanFinal13');
            if(data) {
                cameras = JSON.parse(data);
                render();
            } else {
                // Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¹Ù†Ø¯ Ø£ÙˆÙ„ ØªØ´ØºÙŠÙ„
                addCam('cam_main', 50, 90);
                addCam('cam_rev', 50, 10);
            }
        }

        function saveData() { localStorage.setItem('camPlanFinal13', JSON.stringify(cameras)); }

        // --- Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø°Ù ---
        function addCam(typeId = 'cam_main', x = 50, y = 50) {
            const id = Date.now().toString();
            const typeInfo = CAM_TYPES.find(t => t.id === typeId) || CAM_TYPES[0];
            
            cameras.push({
                id: id,
                typeId: typeId,
                name: typeInfo.name,
                lens: typeInfo.lens,
                loc: '',
                x: x, 
                y: y
            });
            render();
            saveData();
        }

        function deleteCam(id) {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ØŸ')) {
                cameras = cameras.filter(c => c.id !== id);
                render();
                saveData();
            }
        }

        function clearAll() {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ØªØŸ')) {
                cameras = [];
                render();
                saveData();
            }
        }

        // --- Ø§Ù„Ø±Ø³Ù… (Render) ---
        function render() {
            pitch.innerHTML = '';
            tbody.innerHTML = '';

            cameras.forEach((cam, index) => {
                const typeInfo = CAM_TYPES.find(t => t.id === cam.typeId) || CAM_TYPES[0];

                // 1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
                const el = document.createElement('div');
                el.className = 'cam-icon';
                if(cam.id === selectedId) el.classList.add('selected');
                el.style.backgroundImage = `url('${typeInfo.img}')`;
                el.style.left = cam.x + '%';
                el.style.top = cam.y + '%';
                el.title = `${cam.name} (${typeInfo.name})`;
                
                const num = document.createElement('div');
                num.className = 'cam-num';
                num.innerText = index + 1;
                el.appendChild(num);

                el.onmousedown = (e) => startDrag(e, cam.id);
                pitch.appendChild(el);

                // 2. Ø¥Ù†Ø´Ø§Ø¡ ØµÙ Ø§Ù„Ø¬Ø¯ÙˆÙ„
                const tr = document.createElement('tr');
                if(cam.id === selectedId) tr.classList.add('active-row');
                
                let options = '';
                CAM_TYPES.forEach(t => {
                    options += `<option value="${t.id}" ${t.id === cam.typeId ? 'selected' : ''}>${t.name}</option>`;
                });

                tr.innerHTML = `
                    <td><strong>${index + 1}</strong></td>
                    <td><select onchange="updateCam('${cam.id}', 'typeId', this.value)">${options}</select></td>
                    <td><input value="${cam.name}" oninput="updateCam('${cam.id}', 'name', this.value)" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"></td>
                    <td><input value="${cam.lens}" oninput="updateCam('${cam.id}', 'lens', this.value)" placeholder="Ù…Ø«Ø§Ù„: 86x"></td>
                    <td><input value="${cam.loc}" oninput="updateCam('${cam.id}', 'loc', this.value)" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"></td>
                    <td style="text-align:center;"><button class="del-btn" onclick="deleteCam('${cam.id}')">ğŸ—‘</button></td>
                `;
                
                tr.onclick = (e) => {
                    // Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
                    if(!['INPUT','SELECT','BUTTON'].includes(e.target.tagName)) {
                        selectedId = cam.id;
                        render();
                    }
                };
                
                tbody.appendChild(tr);
            });
        }

        function updateCam(id, field, value) {
            const cam = cameras.find(c => c.id === id);
            if(cam) {
                cam[field] = value;
                // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¹Ø¯Ø³Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù†ÙˆØ¹
                if(field === 'typeId') {
                    const info = CAM_TYPES.find(t => t.id === value);
                    cam.name = info.name;
                    cam.lens = info.lens;
                }
                saveData();
                render();
            }
        }

        // --- Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª (Drag & Drop) ---
        function startDrag(e, id) {
            e.preventDefault();
            selectedId = id;
            draggedId = id;
            render(); // Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¸Ù„ÙŠÙ„
            document.addEventListener('mousemove', onDrag);
            document.addEventListener('mouseup', stopDrag);
        }

        function onDrag(e) {
            if(!draggedId) return;
            const rect = pitch.getBoundingClientRect();
            let x = ((e.clientX - rect.left) / rect.width) * 100;
            let y = ((e.clientY - rect.top) / rect.height) * 100;
            
            // Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ù„Ø¹Ø¨
            x = Math.max(0, Math.min(100, x));
            y = Math.max(0, Math.min(100, y));

            const cam = cameras.find(c => c.id === draggedId);
            cam.x = x;
            cam.y = y;
            
            // ØªØ­Ø¯ÙŠØ« Ø³Ø±ÙŠØ¹ (Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
            render(); 
        }

        function stopDrag() {
            draggedId = null;
            document.removeEventListener('mousemove', onDrag);
            document.removeEventListener('mouseup', stopDrag);
            saveData();
        }

        // Ø§Ù„ØªØ´ØºÙŠÙ„
        loadData();

    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <title>Stadium Camera Planner</title>
    <style>
    /* --- General Styles --- */
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; margin: 0; }
    
    .main-header { text-align: center; margin-bottom: 20px; }
    #displayTitle { margin: 0; color: #333; font-size: 2.2em; text-transform: uppercase; }
    #displayDateTime { margin: 5px 0; color: #666; font-size: 1.2em; font-weight: bold; }
    
    .header-inputs {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 15px;
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .header-inputs input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
    
    .controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
    button { padding: 8px 16px; cursor: pointer; background: white; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; }
    button:hover { background: #eee; }
    #addBtn { background: #28a745; color: white; border: none; }
    
    .workspace { display: flex; flex-direction: column; align-items: center; gap: 20px; }

    #pitch-container {
        position: relative;
        width: 1000px;
        max-width: 95vw;
        aspect-ratio: 16/9;
        background-image: url('pitch.jpg'); 
        background-color: #2e7d32; 
        background-size: cover;
        background-position: center;
        border: 2px solid #444;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .cam-icon {
        position: absolute;
        width: 40px;
        height: 40px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        cursor: grab;
        transform: translate(-50%, -50%);
        z-index: 10;
    }

    .cam-num {
        position: absolute; top: -5px; right: -5px;
        background: red; color: white; font-size: 10px;
        width: 18px; height: 18px; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        border: 1px solid white; font-weight: bold;
        z-index: 15;
    }

    .table-box { width: 1000px; max-width: 95vw; background: white; padding: 10px; border-radius: 8px; overflow-x: auto; margin-bottom: 50px;}
    table { width: 100%; border-collapse: collapse; min-width: 600px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f8f9fa; }
    tr.active-row { background: #e6f7ff; }
    input, select { width: 100%; padding: 5px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 3px; }

    /* --- PRINT STYLES --- */
    @media print {
        /* Hide UI elements that shouldn't be on paper */
        .controls, .header-inputs, button, .delete-col { 
            display: none !important; 
        }
        
        body { padding: 0; background: white; }
        
        .workspace { gap: 10px; }

        #pitch-container { 
            border: 1px solid #000; 
            box-shadow: none; 
            width: 100%; 
            /* Ensure background images print in Chrome/Safari */
            -webkit-print-color-adjust: exact; 
            print-color-adjust: exact;
        }

        .table-box { 
            width: 100%; 
            box-shadow: none; 
            margin-bottom: 0;
            padding: 0;
        }

        table { 
            font-size: 12px; /* Smaller font to fit more info */
            border: 1px solid #000;
        }

        /* Replace inputs with plain text appearance for printing */
        input, select {
            border: none;
            background: transparent;
            appearance: none;
            -webkit-appearance: none;
        }

        /* Hide the "Delete" column header and cells */
        th:last-child, td:last-child {
            display: none;
        }
    }
</style>
</head>
<body>

    <header class="main-header">
        <h1 id="displayTitle">STADIUM CAMERA PLANNER</h1>
        <p id="displayDateTime">DATE: --/--/---- | TIME: --:--</p>
    </header>

    <div class="header-inputs">
        <input type="text" id="matchTitle" placeholder="Match Name (e.g. Final Cup)" oninput="updateHeader()">
        <input type="date" id="matchDate" oninput="updateHeader()">
        <input type="time" id="matchTime" oninput="updateHeader()">
    </div>

    <div class="controls">
        <button id="addBtn" onclick="addCam()">+ Add Camera</button>
        <button onclick="saveData()">üíæ Save Plan</button>
        <button onclick="window.print()">üñ®Ô∏è Print</button>
        <button onclick="clearAll()" style="color:red;">‚úñ Reset All</button>
    </div>

    <div class="workspace">
        <div id="pitch-container">
            </div>

        <div class="table-box">
            <table>
                <thead>
                    <tr>
                        <th width="5%">#</th>
                        <th width="20%">Icon Type</th>
                        <th width="20%">Name</th>
                        <th width="10%">Lens</th>
                        <th width="35%">Location / Notes</th>
                        <th width="10%">Delete</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        const pitch = document.getElementById('pitch-container');
        const tbody = document.getElementById('tableBody');
        let cameras = [];
        let selectedId = null;
        let draggedId = null;

        // UPDATED: Added 'img' property to define the filename for each type
        // Make sure your PNG files match these names exactly!
        const CAM_TYPES = [
            { id: 'type-main',   name: 'Main Camera',       lens: '86x',  img: '2.png' },
            { id: 'type-tight',  name: 'Tight / Zoom',      lens: '100x', img: '11.png' },
            { id: 'type-hbg',    name: 'High Behind Goal',  lens: '86x',  img: '12.png' },
            { id: 'type-lbg',    name: 'Low Behind Goal',   lens: 'Wide', img: '1.png' },
            { id: 'type-rev',    name: 'Reverse Angle',     lens: '86x',  img: '7.png' },
            { id: 'type-18yd',   name: '18-Yard Box',       lens: '22x',  img: '8.png' },
            { id: 'type-close',  name: 'Close Up / Face',   lens: 'Long', img: '9.png' },
            { id: 'type-rf',     name: 'Wireless RF',       lens: 'Std',  img: '10.png' },
            { id: 'type-steady', name: 'Steadicam',         lens: 'Wide', img: '6.png' },
            { id: 'type-hh',     name: 'Handheld',          lens: 'Std',  img: '5.png' },
            { id: 'type-beauty', name: 'Beauty Shot',       lens: 'Wide', img: '4.png' },
            { id: 'type-drone',  name: 'Drone',             lens: 'Wide', img: '3.png' }
        ];

        function updateHeader() {
            const title = document.getElementById('matchTitle').value;
            const date = document.getElementById('matchDate').value;
            const time = document.getElementById('matchTime').value;

            document.getElementById('displayTitle').innerText = title || "STADIUM CAMERA PLANNER";
            document.getElementById('displayDateTime').innerText = `DATE: ${date || '--/--/----'} | TIME: ${time || '--:--'}`;
        }

        function loadData() {
            const camData = localStorage.getItem('camPlan12');
            const headerData = localStorage.getItem('camPlanHeader');

            if(camData) {
                cameras = JSON.parse(camData);
                render();
            } else {
                addCam('type-main', 50, 90);
            }

            if(headerData) {
                const parsed = JSON.parse(headerData);
                document.getElementById('matchTitle').value = parsed.title || '';
                document.getElementById('matchDate').value = parsed.date || '';
                document.getElementById('matchTime').value = parsed.time || '';
                updateHeader();
            }
        }

        function saveData() {
            const headerInfo = {
                title: document.getElementById('matchTitle').value,
                date: document.getElementById('matchDate').value,
                time: document.getElementById('matchTime').value
            };
            localStorage.setItem('camPlan12', JSON.stringify(cameras));
            localStorage.setItem('camPlanHeader', JSON.stringify(headerInfo));
            alert("Plan Saved!");
        }

        function addCam(type = 'type-main', x = 50, y = 50) {
            const id = Date.now().toString();
            const typeInfo = CAM_TYPES.find(t => t.id === type) || CAM_TYPES[0];
            cameras.push({ id, type, name: typeInfo.name, lens: typeInfo.lens, loc: '', x, y });
            render();
        }

        function deleteCam(id) {
            if(confirm('Delete this camera?')) {
                cameras = cameras.filter(c => c.id !== id);
                render();
            }
        }

        function clearAll() {
            if(confirm('Clear entire plan?')) {
                cameras = [];
                document.getElementById('matchTitle').value = '';
                document.getElementById('matchDate').value = '';
                document.getElementById('matchTime').value = '';
                updateHeader();
                render();
                localStorage.clear();
            }
        }

        function render() {
            pitch.innerHTML = '';
            tbody.innerHTML = '';

            cameras.forEach((cam, index) => {
                const typeInfo = CAM_TYPES.find(t => t.id === cam.type);
                
                // --- RENDER ICON ON PITCH ---
                const el = document.createElement('div');
                el.className = 'cam-icon'; // Base class only
                
                // Set the specific PNG image for this camera type
                if(typeInfo) {
                    el.style.backgroundImage = `url('${typeInfo.img}')`;
                }

                if(cam.id === selectedId) {
                    el.style.border = "2px solid white"; // Simple highlight
                    el.style.borderRadius = "50%";
                }

                el.style.left = cam.x + '%';
                el.style.top = cam.y + '%';
                
                const num = document.createElement('div');
                num.className = 'cam-num';
                num.innerText = index + 1;
                el.appendChild(num);

                el.onmousedown = (e) => startDrag(e, cam.id);
                pitch.appendChild(el);

                // --- RENDER TABLE ROW ---
                const tr = document.createElement('tr');
                if(cam.id === selectedId) tr.classList.add('active-row');
                
                let typeOptions = CAM_TYPES.map(t => `<option value="${t.id}" ${t.id === cam.type ? 'selected' : ''}>${t.name}</option>`).join('');

                tr.innerHTML = `
                    <td>${index + 1}</td>
                    <td><select onchange="updateCam('${cam.id}', 'type', this.value)">${typeOptions}</select></td>
                    <td><input value="${cam.name}" oninput="updateCam('${cam.id}', 'name', this.value)"></td>
                    <td><input value="${cam.lens}" oninput="updateCam('${cam.id}', 'lens', this.value)"></td>
                    <td><input value="${cam.loc}" oninput="updateCam('${cam.id}', 'loc', this.value)"></td>
                    <td><button onclick="deleteCam('${cam.id}')" style="color:red;">üóë</button></td>
                `;
                
                tr.onclick = (e) => {
                    if(!['INPUT', 'SELECT', 'BUTTON'].includes(e.target.tagName)) {
                        selectedId = cam.id;
                        render();
                    }
                };
                tbody.appendChild(tr);
            });
        }

        function updateCam(id, field, value) {
            const cam = cameras.find(c => c.id === id);
            if(cam) {
                cam[field] = value;
                // If type changes, auto-update the Name and Lens defaults
                if(field === 'type') {
                    const info = CAM_TYPES.find(t => t.id === value);
                    cam.name = info.name;
                    cam.lens = info.lens;
                }
                render();
            }
        }

        function startDrag(e, id) {
            e.preventDefault();
            selectedId = id;
            draggedId = id;
            render();
            document.addEventListener('mousemove', onDrag);
            document.addEventListener('mouseup', stopDrag);
        }

        function onDrag(e) {
            if(!draggedId) return;
            const rect = pitch.getBoundingClientRect();
            let x = ((e.clientX - rect.left) / rect.width) * 100;
            let y = ((e.clientY - rect.top) / rect.height) * 100;
            x = Math.max(0, Math.min(100, x));
            y = Math.max(0, Math.min(100, y));
            const cam = cameras.find(c => c.id === draggedId);
            cam.x = x; cam.y = y;
            // Update the element directly for smoother performance, but render works too
            render(); 
        }

        function stopDrag() {
            draggedId = null;
            document.removeEventListener('mousemove', onDrag);
            document.removeEventListener('mouseup', stopDrag);
        }

        loadData();
    </script>
</body>
</html>

